# Agentic Resume Tailor (ART)

Local-first resume tailoring agent. ART keeps your profile in a local SQLite DB, stores bullets in a local ChromaDB vector store, optionally parses JDs with OpenAI to build retrieval queries, and renders a single-page LaTeX PDF via Tectonic.

This repo has two runtimes:

- FastAPI backend (`backend/`): API endpoints, agent loop, rendering, artifact/report generation.
- React SPA (`frontend/`): Vite + React UI for Generate, Resume Editor, and Settings pages.

---

![Resume Editor](docs/images/figure.jpg)

## Highlights

- üöÄ Generate a single-page PDF and LaTeX source from any JD (auto-trims lowest-scoring bullets if needed).
- üóÉÔ∏è Edit your profile end-to-end with DB-backed CRUD (personal info, education, experiences, projects).
- üîÅ LLM-backed agent loop builds retrieval plans, rewrites bullets safely, and scores iterations end-to-end.
- ‚úçÔ∏è Curate the final selection: edit, reorder, and add bullets before re-rendering the PDF.
- üßæ Reports capture run config, loop iterations, and score/missing-keyword summaries when the JD parser is used.
- üîÑ One-click export and re-ingest keeps Chroma in sync.

## User Guide

This guide covers day-to-day usage. For setup and deployment, see `ARCHITECTURE.md`.

### 1) Open the app

- React UI: `http://localhost:5173`
- API health: `http://localhost:8000/health`

### 2) Build your profile (Resume Editor)

1. Open **Resume Editor** in the sidebar.
2. Fill out **Personal Info** and **Skills**.
3. Add **Education**, **Work Experience**, and **Projects**.
4. Add bullets under each experience/project.
5. Click **Re-ingest ChromaDB** to refresh retrieval after edits.

Notes:

- Bullet local IDs are stable per experience/project (e.g., `b01`, `b02`) and never renumbered; retrieval uses `exp:<job_id>:<local_id>` and `proj:<project_id>:<local_id>`.
- Bullet text is LaTeX-ready; optional agent rewrites are temporary for the run and validated to avoid new claims.

### 3) Adjust defaults (Settings)

- Open **Settings** to change default generation and ingest behavior.
- Settings are loaded from `backend/config/user_settings.json`, then a runtime-specific override file is
  auto-created on first start and used for saves:
  - `backend/config/user_settings.local.json` for local runs
  - `backend/config/user_settings.docker.json` for Docker/Compose runs
- Changes auto-save on blur/toggle in the UI and write to the override file shown at the top of the
  Settings page.
- To reset to defaults, delete the override file and restart the API.
- The OpenAI API key is read from environment variables only and cannot be updated from the UI. Set `OPENAI_API_KEY` in `backend/.env` (Docker/local) or your shell.
- If you enable **Auto re-ingest on save**, the vector store refreshes after each edit.
- Use **Advanced tuning** to adjust the quantitative bullet bonus (per-hit and cap).
- Disable **Use JD parser** to skip OpenAI parsing; the backend falls back to heuristic queries from the JD.
- The JD parser model is selected from a dropdown of current OpenAI models (or override in `backend/config/user_settings.json`).
- **Experience weight** lets you prefer experience bullets over projects in retrieval ranking.
- Enable **Skip PDF** to avoid Tectonic; the backend writes TeX plus an empty PDF placeholder.
- **Output PDF name** sets the download filename and writes a copy in `backend/output/` (the run-id artifact still exists on disk).

### 4) Generate a tailored resume (Generate)

1. Open **Generate**.
2. Paste a JD and click **Generate**.
3. Review the report, adjust selection, and re-render if needed.
4. Download the PDF, TeX, and report JSON.

Rendering note:

- The backend trims lowest-scoring bullets until the PDF is single-page (unless **Skip PDF** is enabled).

Outputs:

- PDF: `backend/output/<run_id>.pdf` (generated by the backend)
- TeX: `backend/output/<run_id>.tex`
- Report: `backend/output/<run_id>_report.json`

Temporary edits (Generate):

- **Selected bullets** are grouped by experience/project and start collapsed.
- Reorder bullets by drag-and-drop, edit text inline, or remove items before rendering.
- **Bullet picker** adds existing bullets that are not in the current selection.
- **Temporary bullets** are LaTeX-ready and can attach to existing experiences/projects.
- Re-rendering updates the PDF with your edited selection.
- Temporary edits do not touch the SQL DB, exported JSON, or Chroma ingest.
- The report captures `temp_additions`, `temp_edits`, and `temp_removals` for the run.

State persistence (Generate):

- The JD and current selection are cached in local storage so they survive navigation.

### 5) Exported JSON artifact

- `backend/data/my_experience.json` is an exported artifact (for backup/inspection).
- The SQL database remains the source of truth.

---

## Need setup details?

See `ARCHITECTURE.md` for deployment steps, system diagrams, DB schema, and API details.

Template tip: create `backend/templates/resume.local.tex` to override the default
`backend/templates/resume.tex`
without committing your personal edits.

---

## Docker (full stack)

```bash
docker compose up --build
```

- Frontend: `http://localhost:5173`
- Backend: `http://localhost:8000/health`

---

## Local development (uv)

```bash
uv venv
source .venv/bin/activate
cd backend
uv pip install -r requirements.txt

# run unit tests
uv run pytest

# run the API
PYTHONPATH=src uv run python -m agentic_resume_tailor.api.server

# for PDF output, install Tectonic or set skip_pdf=true in settings

# run the UI (separate terminal)
cd frontend
# requires Node.js 20.19+ or 22.12+ for Vite 7
npm install
npm run dev
```

## Frontend tooling notes

- Vite uses `@vitejs/plugin-react` (Babel-based Fast Refresh) by default; swap to the SWC
  plugin if you want faster refresh times.
- The React Compiler is not enabled in this setup; add it only if you want the compiler
  tradeoffs in dev/build.
- For stricter linting, enable type-aware rules in `frontend/eslint.config.js` and include
  the `tsconfig.app.json`/`tsconfig.node.json` projects; optional add-ons include
  `eslint-plugin-react-x` and `eslint-plugin-react-dom`.
